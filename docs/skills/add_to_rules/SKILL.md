---
name: add_to_rules
description: ユーザーの「ルールに追加して」「次回からこうして」という指示を、適切なドキュメントに自動反映する
---

# 📝 Add to Rules (ルール自動追加スキル)

ユーザーが**「ルールに追加して」「これを覚えておいて」「次回からこうしてほしい」**と指示した際に、その内容を分析し、最適な場所に記録・反映します。

## 発動条件 (Triggers)
- 「ルールに追加して」
- 「.mp3はコミットしなくていい」
- 「この設定を忘れないで」
- 「次回からは〜〜するように」

## 手順 (Procedure)

### 1. 内容の分析 (Analyze)
ユーザーの指示内容が以下のどれに該当するか判断します。

| カテゴリ | 具体例 | アクション |
| :--- | :--- | :--- |
| **ファイル除外** | 「mp3は無視して」「ログはいらない」 | `.gitignore` に追記 |
| **生成ルール** | 「画像はもっとリアルに」「歌詞はひらがなで」 | 該当する `SKILL.md` (`image`, `music`) を更新 |
| **手順・フロー** | 「最初に確認して」「フォルダ構成はこうして」 | ワークフロー (`workflows/*.md`) や `production_guide.md` を更新 |
| **全般的な指針** | 「言葉遣いは丁寧に」「英語で出力して」 | `<user_rules>` (メモリ) または `README.md` / `GUIDELINES.md` に追記 |

### 2. ルールの反映 (Apply)
特定したファイルに対して、ユーザーの要望を追記・修正します。

**例1: ファイル除外**
> User: 「.wavもコミットしないで」
> Action: `.gitignore` に `*.wav` を追加。

**例2: 画像プロンプト**
> User: 「画像生成の時は必ずアスペクト比を16:9にして」
> Action: `image_generation_nanobanana/SKILL.md` のプロンプト例に `--ar 16:9` を追加。

### 3. 報告 (Report)
「○○をルールに追加しました（反映先: `filename`）」とユーザーに報告します。

---

## 重要な注意点
- **判断に迷う場合**: どこに書くべきか不明な場合は、ユーザーに「どのファイルに記録しますか？（ガイドライン or スキル）」と確認すること。
- **既存ルールの競合**: 既存のルールと矛盾する場合は、上書きして良いか確認すること。
